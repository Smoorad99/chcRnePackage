---
output: github_document
always_allow_html: true
---

```{r setup, include=FALSE} 
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
```

# chcRne 
The chcRne package was developed to organize functions, useful code snippets, and other information relevant to the Research and Evaluation team at the Center for Healthy Communities.


## How to install:

```
install.packages("devtools") 
devtools::install_github("Smoorad99/chcRnePackage")
```


## Examples

<br/>

### Data Management

Functions in this section are used for data management.

- We are using `yesno_to_binary` to change q14_1 - q14_10 from yes/no to 1/0.
```{r include=TRUE}
library(chcRne)
library(dplyr)

data <- bns2_pkg_data %>% select(q13, q14_1:q14_10)

df_converted <- yesno_to_binary(data, "q14_")
# View the converted dataframe side-by-side
old <- bns2_pkg_data |> dplyr::select(q14_1, q14_4)
new <- df_converted |> dplyr::select(q14_1, q14_4)
cbind(old, new) %>% head(10)

```

```{r echo=FALSE}
df_converted$q14_30 <- bns2_pkg_data$q14_30
```

- Now that each column of our mark all that apply question is 1/0, we are using `pnta.unanswered.to.miss()` to set all columns in the select all that apply question to NA when the "Prefer not to answer" option was selected.
```{r}
df_unanswered_to_miss <- pnta.unanswered.to.miss(data = df_converted,
                                  prefix = "q14_",
                                  pnta = bns2_pkg_data$q14_30)
new <- df_unanswered_to_miss %>%  select(q14_3:q14_5, q14_30)
new$q14_30 <- df_converted$q14_30
new %>% head(10)
```

<br/>

### Tables
Functions in this section are for the creation tables the R&E team frequently uses.

- `nperc_tbl_MATA()` Creates a table showing the n counts and percentages for each option in a mark all that apply question.
```{r table1, include=TRUE}
cols <- c("q14_3", "q14_4", "q14_5")
rnames <- c("I like cooking", "I am a broke college student", "I live with chefs")

# Create table that reports n count and percent for a mark all that apply question
mark_all_that_apply_tbl <- nperc_tbl_MATA(df = df_unanswered_to_miss,
               vars = cols,
               value = "1",
               row.names = rnames,
               punc = ".")
mark_all_that_apply_tbl
```

- `question_table` creates a table with counts and percentages for a single categorical variable.

```{r}
question_tbl <- question_table(data = bns2_pkg_data, 
               x = 'q13', 
               cnames = c("Level of Education", "Yes %"), 
               kbl_styling = TRUE)
question_tbl
```

<br/>

### Statistics (often used in inline code)
Functions in this section return statistics that are often used for explanations on figures. Many of these functions will often be used in inline code.

`print_n_reporting()`

`count_and_percent()` Returns a string that includes the total count and percentage of the categories in the input variable.

`get_perct()`

